<div ng-include="'components/layout/navbar/navbar.html'"></div>
<div ng-include="'components/layout/navbar/sub-navbar.html'"></div>
<div ui-view="" autoscroll="true">
  <div class="main-wrapper" cg-busy="{promise:dashboard.busy, message:'Loading dashboard... Please wait'}">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 my-profile">

          <!-- User selects their current interest -->

          <h2>I'm Interested In</h2>

          <!-- TODO Need to bind data, checkboxes are not showing up -->

          <div class="white-box interested-box">
            <form name="connectTo" ng-submit="dashboard.updateStatus(connectTo, dashboard.userStatus)" novalidate>
              <h4><i class="fa fa-car"></i>Carpooling</h4>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.carpoolingToCampus">To Campus</label>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.carpoolingFromCampus">From Campus</label>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.carpoolingForGroceries">For Groceries</label>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.carpoolingForRoadtrip">Roadtrip</label>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.carpoolingSplit">Split a Uber/Lyft</label>
              <h4><i class="fa fa-child"></i>Walking</h4>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.walkingToCampus">To Campus</label>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.walkingFromCampus">From Campus</label>
              <h4><i class="fa fa-users"></i>Meeting Up</h4>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.meetForHangout">Hangout</label>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.meetForStudy">Study Group</label>
              <label class="checkbox"><input type="checkbox" ng-model="dashboard.userStatus.meetForEvents">Campus Events</label>
              <button class="btn btn-primary btn-block" type="submit">Update My Status</button>
            </form>
          </div>
          <!-- Create a post -->
          <h2>Post</h2>

          <div class="white-box buttons-box">
            <a class="btn btn-secondary" ui-sref="addRoom">Post Available Housing</a>
            <a  class="btn btn-primary" ui-sref="addNewLooking" ui-sref-opts="{reload:true}">Post Looking</a>
          </div>

          <!-- Profile -->

          <h2>You</h2>

          <div class="white-box profile-sidebar">
            <div class="profile">
              <img class="img-circle" ng-if="dashboard.me.profileImage" ng-src="/api/images{{dashboard.me.profileImage}}">
              <i ng-if="!dashboard.me.profileImage" class="fa fa-user fa-5x img-circle" style="text-align: center; display: inline-block;width: 100%;"></i>
              <h2> {{dashboard.me.firstname}} {{dashboard.me.lastname}} </h2>
              <a class="btn btn-secondary btn-block" ui-sref="myProfile"> Complete Profile </a>
              <p><br></p>
              <a ng-if="dashboard.numberOf>0" ui-sref="myProfile" class="inviteRequest">You have {{dashboard.numberOf}} roommate requests</a>
            </div>
          </div>

          <div class="feedback">
            <ul style="list-style: none">
              Any improvements?
              <li><i class="fa fa-envelope"></i>&nbsp;&nbsp;<a href="mailto:feedback@campusly.org?=Website%20Feedback">feedback@campusly.org</a></li>
              <li><i class="fa fa-facebook-square"></i>&nbsp;&nbsp;<a href="https://www.facebook.com/app_scoped_user_id/837190803015531/" target="_blank">Facebook PM</a></li>
            </ul>
          </div>

        </div>

        <!-- Available Rooms -->
        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">

          <!--Around you partial-->
          <div ng-include="'app/dashboard/around.you.html'"></div>

          <h2 class="section-title"> Available Rooms</h2>
          <div class="white-box available-rooms">
            <slick dots="true" class="slider row" init-onload="true" data="dashboard.availableRooms" slides-to-show="3" slides-to-scroll="3" infinite="false" responsive="dashboard.breakpoints.availableRooms" ng-if="dashboard.availableRooms.length">
              <!-- start room box -->
              <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 room" ng-repeat="room in dashboard.availableRooms track by $index">
                <a style="text-decoration: none" ui-sref="roomDetail({param: room.roomDetails.id})">
                  <div class="picture">
                    <img border="0" ng-src="//maps.googleapis.com/maps/api/staticmap?center={{room.propertyDetails.coords.latitude}},{{room.propertyDetails.coords.longitude}}&zoom=14&scale=2&size=400x250&markers=color:blue%7C{{room.propertyDetails.coords.latitude}},{{room.propertyDetails.coords.longitude}}&key=AIzaSyAm7woOFr0TOKG0U7jsBF5K3LSifdDjgfs">
                  </div>
                  <div class="info">
                    <strong class="value">
                      {{room.roomDetails.monthlyPrice | currency}} mo. / Room
                    </strong>
                  </div>
                  <ul class="specs">
                    <li><i class="fa fa-bigBed"></i>&nbsp;&nbsp;{{room.roomDetails.roomType}}</li>
                    <li><i class="fa fa-shower"></i>&nbsp;&nbsp;{{room.roomDetails.sharedBathroom ? "Shared" : "Private"}} bathroom</li>
                    <li ng-show="room.roomDetails.numRoomates > 1"><i class="fa fa-users"></i>&nbsp;&nbsp;{{room.roomDetails.numRoomates}} roommates + You</li>
                    <li ng-show="room.roomDetails.numRoomates == 1"><i class="fa fa-users"></i>&nbsp;&nbsp;{{room.roomDetails.numRoomates}} roommate + You</li>
                    <li><i class="fa fa-venus-mars"></i>&nbsp;&nbsp;{{room.roomDetails.gender}}</li>
                    <li><i class="fa fa-arrow-right"></i>&nbsp;&nbsp;{{room.roomDetails.availableMoveIn | date }}</li>
                    <li><i class="fa fa-map-marker"></i>&nbsp;&nbsp;{{room.propertyDetails.city }}</li>
                  </ul>
                </a>
              </div>
              <!-- end room box -->
            </slick>
            <hr>
            <a class="pull-right btn-rented-event view-all" ui-sref="rooms">View All</a>
          </div>

          <!-- Looking -->

          <h2 class="section-title">Students Looking</h2>
          <div class="white-box looking-for-room" >
            <h3 ng-if="!dashboard.lookingRoom.length" >
              Currently no one is looking for a room, why don't you be the first?
              <small>
                <a ui-sref="addNewLooking"><br/>Click here</a> to add looking.
              </small>
            </h3>
            <slick dots="true" class="slider row" slides-to-show="2" slides-to-scroll="3" responsive="dashboard.breakpoints.lookingRoom" init-onload="true" infinite="false" data="dashboard.lookingRoom" ng-if="dashboard.lookingRoom.length">
              <!-- start room box -->

              <div ng-if="looking.userId!=dashboard.me.id" class="col-xs-12 col-sm-12 col-md-6 col-lg-6 room" ng-repeat="looking in dashboard.lookingRoom track by $index">
                <a style="text-decoration: none" ui-sref="lookingDetail({param:looking.id})">
                  <div  class="media">
                    <div class="media-left">
                      <img ng-if="looking.relatedUserId.profileImage" ng-src="api/images{{looking.relatedUserId.profileImage}}" class="img-circle" height="100px" width="100px">
                      <i ng-if="!looking.relatedUserId.profileImage" class="fa fa-user fa-5x"></i>
                    </div>
                    <div class="media-body">
                      <h4 class="media-heading user-name">
                        {{looking.relatedUserId.firstname}} {{looking.relatedUserId.lastname}}
                      </h4>
                      <p ng-show="looking.relatedUserId.aboutMe" class="quote text-container-looking">{{looking.relatedUserId.aboutMe}}</p>
                      <p ng-hide="looking.relatedUserId.aboutMe" class="quote text-container-looking">No description available</p>
                    </div>
                    <ul class="profile-info">
                      <li><i class="fa fa-arrow-right"></i>&nbsp;&nbsp;{{looking.moveInDate | date}}</li>
                      <li><i class="fa fa-tag"></i>&nbsp;&nbsp;{{looking.maxMonthlyRent | currency}}</li>
                      <li><i class="fa fa-venus-mars"></i>&nbsp;&nbsp;{{looking.gender}}</li>
                    </ul>
                  </div>
                </a>
              </div>
              <!-- end room box -->
            </slick>
            <hr>
            <a class="pull-right btn-rented-event view-all" ui-sref="looking">View All</a>
          </div>

          <!-- My Available Rooms Posts - Hides if no Looking posts-->
          <div ng-show="dashboard.myRoomListings.length" class="posts-dashboard-title">

            <h2 class="section-title"> My Posts - Available Room</h2>

            <div class="white-box my-listings">
              <h3 ng-if="!dashboard.myRoomListings.length">
                You don't have anything posted yet.
                <small>
                  <a ui-sref="addNewLooking"><br/>Click here</a> to add looking.
                  <a ui-sref="addRoom"><br/>Click here</a> to add room.
                </small>
              </h3>
              <slick ng-if="dashboard.myRoomListings.length" dots="true" class="slider row" slides-to-show="1" slides-to-scroll="1">

                <!-- start list box -->
                <div class="list-item" ng-repeat="room in dashboard.myRoomListings">
                  <div class="row" >

                    <a style="text-decoration: none" ui-sref="roomDetail({param:room.id})">
                      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 col-sm-offset-1 col-md-offset-1 col-lg-offset-1">
                        <div class="info" >
                          <span class='value'>{{room.monthlyPrice |currency}}</span>
                          <span class='address'><i class="fa fa-transgender"></i> Gender: {{room.gender}} </span>
                          <span class='address'><i class="fa fa-users"></i> Max roommates: {{room.numRoomates}} </span>

                      <span class="elapsed-time">
                        <small><i class="fa fa-clock-o"></i>&nbsp{{room.createdAt | date:'longDate'}}</small>
                      </span>

                      <span class="elapsed-time" ng-if="room.updatedAt">
                           <small><i class="fa fa-pencil"></i></small>
                           <small am-time-ago="room.updatedAt"></small>
                      </span>

                        </div>
                      </div>

                      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                        <div class="picture">
                          <img border="0" ng-src="//maps.googleapis.com/maps/api/staticmap?center={{room.relatedPropertyId.latitude}},{{room.relatedPropertyId.longitude}}&zoom=14&scale=2&size=400x250&markers=color:blue%7C{{room.relatedPropertyId.latitude}},{{room.relatedPropertyId.longitude}}&key=AIzaSyAm7woOFr0TOKG0U7jsBF5K3LSifdDjgfs">
                        </div>
                      </div>
                    </a>

                    <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 col-xs-offset-4 col-sm-offset-2 col-md-offset-2 col-lg-offset-2">
                      <div class="edit">
                        <a class="new-bubble pull-left" ui-sref="editRoom({id:room.id})" ui-sref-opts="{reload:true}">
                          <i class="fa fa-pencil"></i>
                        </a>
                      </div>
                    </div>

                  </div>
                </div>
              </slick>
              <hr>
            </div>
          </div>

          <!-- My Looking Posts - Hides if no Looking posts-->
          <div ng-show="dashboard.userLookings.length" class="posts-dashboard-title">

            <h2 class="section-title"> My Posts - Looking</h2>

            <div class="white-box my-listings" >
              <h3 ng-if="!dashboard.userLookings.length" >
                You don't have anything posted yet.
                <small>
                  <a ui-sref="addNewLooking"><br/>Click here</a> to add looking.
                  <a ui-sref="addRoom"><br/>Click here</a> to add room.
                </small>
              </h3>
              <slick dots="true" class="slider row" slides-to-show="1" slides-to-scroll="1" ng-if="dashboard.userLookings.length">

                <!-- start list box -->
                <div class="list-item" ng-repeat="look in dashboard.userLookings">
                  <div class="row" >
                    <a style="text-decoration: none" ui-sref="lookingDetail({param:look.id})">
                      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 col-sm-offset-1 col-md-offset-1 col-lg-offset-1">
                        <div class="info">
                          <span class='value'>{{look.maxMonthlyRent |currency}}</span>
                          <span class='address'><i class="fa fa-transgender"></i> Gender: {{look.gender}} </span>
                          <span class='address'><i class="fa fa-users"></i> Max roommates: {{look.numRoommates}} </span>

                      <span class="elapsed-time">
                        <small><i class="fa fa-clock-o"></i>&nbsp{{look.createdAt | date:'longDate'}}</small>
                      </span>

                      <span class="elapsed-time" ng-if="look.updatedAt">
                         <small><i class="fa fa-pencil"></i></small>
                         <small am-time-ago="look.updatedAt"></small>
                      </span>

                        </div>
                      </div>
                    </a>

                    <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 col-xs-offset-4 col-sm-offset-5 col-md-offset-5 col-lg-offset-5">
                      <div class="edit">
                        <a class="new-bubble pull-right" ui-sref="editLooking({id:look.id})" ui-sref-opts="{reload:true}">
                          <i class="fa fa-pencil"></i>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </slick>
              <hr>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
