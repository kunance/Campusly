<div ng-include="'components/layout/navbar/navbar.html'"></div>
<div ng-include="'components/layout/navbar/sub-navbar.html'"></div>

<!-- Main wrapper class - responsible for page styling -->

<div class="main-wrapper">
  <div class="container">
    <div class="row">
      <div class="page-header">
        <h2>Edit Room</h2>
      </div>

      <form name="editRoomForm" ng-submit="vm.edit()" novalidate>

        <!-- Room listing view -->

        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 white-box" id="room-specifics">

          <!--start of first col 4-->
          <div class="col-md-4">

            <!-- Move-in -->

            <div class="row">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-arrow-right fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="availableMoveIn">Move-in date</label>
                <p class="input-group">
                  <input type="text" id="availableMoveIn" required name="availableMoveIn" class="form-control" datepicker-popup="{{format}}" ng-model="vm.room.availableMoveIn" is-open="datePickers.startDate" close-text="Close" />
                      <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="open($event,'startDate')"><i class="glyphicon glyphicon-calendar"></i></button>
                      </span>
                </p>
              </div>
            </div>

            <!-- Move-out -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-arrow-left fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="leaseEndDate">Move-out date</label>
                <p class="input-group">
                  <input type="text" id="leaseEndDate" required name="monthlyPrice" class="form-control" datepicker-popup="{{format}}" ng-model="vm.room.leaseEndDate" is-open="datePickers.endDate" close-text="Close" />
                          <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="open($event,'endDate')"><i class="glyphicon glyphicon-calendar"></i></button>
                          </span>
                </p>
              </div>
            </div>

            <!-- Monthly rent -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-tag  fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="monthlyPrice">Monthly Rent ($)</label>
                <input type="number" id="monthlyPrice" name="monthlyPrice" required class="form-control"  placeholder="e.x. 750" ng-model="vm.room.monthlyPrice">
                <div ng-show="addNewRoomForm.monthlyPrice.$dirty && addNewRoomForm.monthlyPrice.$invalid">
                  <p class="help-block error" >Enter a the monthly rent</p>
                </div>
              </div>
            </div>

            <!-- Security Deposit -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-tags fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="securityDeposit">Security Deposit ($)</label>
                <input type="number" id="securityDeposit" required name="securityDeposit" class="form-control"  placeholder="e.x. 750" ng-model="vm.room.securityDeposit"/>
              </div>
            </div>

            <!-- Monthly utilities -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-bar-chart fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="monthlyUtilityCost">Monthly utility cost ($)</label>
                <input type="number" id="monthlyUtilityCost" required name="monthlyUtilityCost" class="form-control"  placeholder="e.x. 50" ng-model="vm.room.monthlyUtilityCost"/>
              </div>
            </div>

            <!-- Lease type -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-clipboard fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="leaseType">Lease type</label>
                <select id="leaseType" class="form-control" ng-model="vm.room.leaseType" required>
                  <option value="sub-lease">Sub-lease</option>
                  <option value="month-to-month">Month to month</option>
                  <option value="lease take over">Lease take over</option>
                </select>
              </div>
            </div>

            <!-- Number of roommates -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-users fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="numRoomates">Current no. of roommates</label>
                <input type="number" id="numRoomates" required name="numRoomates" class="form-control" ng-model="vm.room.numRoomates" min="1" max="10"/>
              </div>
            </div>

          </div>

          <!--start of second col 4-->
          <div class="col-md-4">

            <!-- Property type -->

            <div class="row">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-building fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="type">Property type</label>
                <select id="type" class="form-control" ng-model="vm.property.type" required>
                  <option value="apt">Apartment</option>
                  <option value="sfh">Single family house</option>
                  <option value="townhouse">Townhouse</option>
                </select>
              </div>
            </div>

            <!-- Bathrooms -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-toiletPaper fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="bathrooms">Bathrooms</label><br/>
                <input type="number" id="bathrooms" required name="bathrooms" class="form-control"  placeholder="Number of bathrooms" ng-model="vm.property.bathrooms"/>
              </div>
            </div>

            <!-- Shared bathroom -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-shower fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="sharedBath">Shared Bathroom?</label>
                <select id="sharedBath" required name="sharedBath" class="form-control" ng-model="vm.room.sharedBathroom">
                  <option value="true">Yes</option>
                  <option value="false">No</option>
                </select>
              </div>
            </div>

            <!-- Bedrooms -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-bed fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="bedrooms">Bedrooms</label><br/>
                <input type="number" id="bedrooms" required name="bedrooms" class="form-control"  placeholder="Number of bedrooms" ng-model="vm.property.bedrooms"/>
              </div>
            </div>

            <!-- Room type -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-bigBed fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="roomType">Room type</label>
                <select id="roomType" class="form-control" ng-model="vm.room.roomType" required>
                  <option value="single">Single</option>
                  <option value="double">Double</option>
                  <option value="living room">Living room</option>
                </select>
              </div>
            </div>

            <!-- Furnished -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-desk fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="furnished">Furnished?</label>
                <select id="furnished" required name="furnished" class="form-control" ng-model="vm.room.furnished">
                  <option value="true">Yes</option>
                  <option value="false">No</option>
                </select>
              </div>
            </div>

            <!-- Smoking -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-smoking fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="smokingAllowed">Smoking allowed?</label>
                <select id="smokingAllowed" required name="smokingAllowed" class="form-control" ng-model="vm.room.smokingAllowed">
                  <option value="true">Yes</option>
                  <option value="false">No</option>
                </select>
              </div>
            </div>

          </div>

          <!--start of third col 4-->
          <div class="col-md-4">

            <!-- Gender preference -->

            <div class="row">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-venus-mars fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="gender">Gender preference</label>
                <select id="gender"class="form-control" ng-model="vm.room.gender" required>
                  <option value="no preference">No preference</option>
                  <option value="male only">Male only</option>
                  <option value="female only">Female only</option>
                </select>
              </div>
            </div>

            <!-- Pets Allowed -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-pet fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="petsAllowed">Pets allowed?</label>
                <select id="petsAllowed" required name="petsAllowed" class="form-control" ng-model="vm.room.petsAllowed">
                  <option value="true">Yes</option>
                  <option value="false">No</option>
                </select>
              </div>
            </div>

            <!-- Parking Allowed -->

            <div class="row post-padding">
              <div class="col-xs-2 col-sm-2 col-xs-offset-1 col-sm-offset-1">
                <div class="post-bubble">
                  <i class="fa fa-car fa-lg"></i>
                </div>
              </div>
              <div class="col-xs-9 col-sm-7 input-post">
                <label for="parkingAvailable">Parking available</label>
                <select id="parkingAvailable" required name="parkingAvailable" class="form-control" ng-model="vm.room.parkingAvailable">
                  <option value="true">Yes</option>
                  <option value="false">No</option>
                </select>
              </div>
            </div>

            <!-- Description -->

            <div class="row post-padding">
              <div class="col-xs-10 col-sm-8 col-xs-offset-2 col-sm-offset-2 input-post">
                <textarea required name="roomDescription" id="roomDescription" cols="60" rows="10" ng-model="vm.room.description"  class="form-control" placeholder="Enter room description"></textarea>
              </div>
            </div>

          </div>

        </div>


      </form>

      <!-- End of form -->

      <!-- Roommates and Address boxes -->

      <div class="row">

        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
          <div class="page-header">
            <h2> Roommates </h2>
            <a class="bubble edit-profile" ng-click="myProfile.toggleRoommatesAddon()">
              <i class="fa fa-plus" ng-hide="myProfile.showRoommatesAddonButtons"></i>
              <i class="fa fa-minus" ng-show="myProfile.showRoommatesAddonButtons"></i>
            </a>
          </div>
          <div class="white-box roommates">

            <div ng-show='myProfile.showRoommatesAddonButtons' class="text-center">
              <a class="btn btn-primary btn-half-block" ng-click="myProfile.toggleAddRoommate()">
                <i class="fa fa-plus"></i>
                Add Roommate
              </a>
              <a class="btn btn-secondary btn-half-block" ng-click="myProfile.toggleInviteRoomate()">
                <i class="fa fa-envelope"></i>
                Invite Roommate
              </a>
              <hr>
            </div>

            <div ng-show="myProfile.showAddRoommate">
              <a class="bubble cancel" ng-click="myProfile.cancelRoommateAddAddon()"><i class="fa fa-close"></i></a>
              <h3>Search for your Roommate using by email. </h3>

              <angucomplete-alt id="members"
                                placeholder="Search for roommate"
                                pause="400"
                                selected-object="addNewRoommate"
                                local-data="myProfile.users.data"
                                search-fields="email"
                                title-field="firstname,lastname"
                                description-field="email"
                                image-field="profileImage"
                                input-class="form-control form-control-small"
                                match-class="redFont"
                                clear-selected="true">
                <hr>


            </div>
            <h2 class="no-roommate" ng-hide="myProfile.showAddRoommate || myProfile.roommates.length > 0">
              You don't have any roommate yet.
              <small>
                <a href="" ng-click="myProfile.toggleAddRoommate()">Click here</a> to find and add your roommates.
              </small>
            </h2>
            <div class="row roommate" ng-repeat="roommate in myProfile.roommates">
              <div class="col-xs-2">
                <div class="picture">
                  <img ng-if="roommate.relatedRoommateId.profileImage" ng-src="api/images{{roommate.relatedRoommateId.profileImage}}" alt="" class="img-circle">
                  <i ng-if="!roommate.relatedRoommateId.profileImage" class="fa fa-user" style="font-size:80px"></i>
                </div>
              </div>
              <div class="col-xs-6 info">
                <span class="name"> {{roommate.relatedRoommateId.firstname}} {{roommate.relatedRoommateId.lastname}} </span>
                <span class="email">{{roommate.relatedRoommateId.email}}</span>
                <span class="university" ng-if="roommate.relatedRoommateId.usereducationUsers[0].educationCenterName">{{roommate.relatedRoommateId.usereducationUsers[0].educationCenterName}}</span>
                <span class="university" ng-if="!roommate.relatedRoommateId.usereducationUsers[0].educationCenterName">User didn't provide education data</span>
                <span class="city" ng-if="roommate.relatedRoommateId.addresshistoryUsers.length">{{roommate.relatedRoommateId.addresshistoryUsers[0].zip}} {{roommate.relatedRoommateId.addresshistoryUsers[0].city}} / {{roommate.relatedRoommateId.addresshistoryUsers[0].state}}</span>
                <span class="city" ng-if="!roommate.relatedRoommateId.addresshistoryUsers.length">User didn't provide address data</span>
              </div>
              <div class="actions col-xs-4">
                <a class="bubble remove" ng-click="myProfile.removeRoommate(roommate)"><i class="fa fa-trash-o"></i></a>
              </div>
            </div>

          </div>
        </div>

        <!--  Address  -->
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
          <div class="page-header">
            <h2> Address and Pictures </h2>
          </div>

          <div class="white-box pets">

            <!-- Display current property address -->

            <div class="row">

              <div class="col-xs-12 col-sm-12">

                <h3 class="pull-left">Property Address</h3><br>
                <p class="pull-left">
                  <br>
                  {{vm.room.relatedPropertyId.streetNumeric}} {{vm.room.relatedPropertyId.streetAddress}} {{vm.room.relatedPropertyId.apt}}
                  <br>
                  {{vm.room.relatedPropertyId.city}}, {{vm.room.relatedPropertyId.state}} {{vm.room.relatedPropertyId.zip}}
                </p>

              </div>

            </div>

            <!-- Add property pictures -->

            <div class="row property-pictures">

              <div class="col-xs-12 col-sm-12">

                <h3 class="pull-left">Property Pictures</h3><br>
                <div fileupload data="vm.data"></div>

              </div>

            </div>

          </div>
        </div>
        <!-- End Address  -->

      </div>

    </div>

    <div class="row post-padding">
      <div class="col-xs-12 col-sm-12">
        <button class="btn-rented-medium primary pull-right" ng-disabled="editRoomForm.$invalid || editRoomForm.$pristine " ng-click="vm.edit()">Save</button>
        <button class="btn-rented-medium delete pull-left" ng-disabled="editRoomForm.$dirty" ng-click="vm.delete()">Delete</button>
      </div>
    </div>

    <pre>{{[vm.room] | json}}</pre> <!-- To be removed for production -->

  </div>
</div>
